<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Locations - MiHi Entertainment</title>
    <link rel="icon" type="image/svg+xml" href="../assets/images/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script src="https://code.highcharts.com/6.0.6/highcharts.js"></script>
    <script src="https://code.highcharts.com/6.0.6/highcharts-more.js"></script>
    <script src="https://cdn.rawgit.com/mekhatria/hexagon/master/hexagon.js"></script>
    <style>
        html,
        body {
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: #1a202c;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .section-padding {
            padding: 3rem 0;
        }

        @media (min-width: 768px) {
            .section-padding {
                padding: 5rem 0;
            }
        }

        .hero-gradient {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.5) 100%);
        }

        @keyframes bounceFloat {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        .hero-title {
            font-size: 1.875rem;
            font-weight: 900;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            text-shadow:
                0 0 20px rgba(255, 255, 255, 0.5),
                0 4px 8px rgba(0, 0, 0, 0.8),
                0 8px 16px rgba(0, 0, 0, 0.6),
                2px 2px 0px rgba(0, 80, 255, 0.3);
            line-height: 1.1;
            margin-bottom: 1rem;
        }

        .hero-title .location-icon-o {
            display: inline-block;
            width: 1.5em;
            height: 1.5em;
            vertical-align: middle;
            position: relative;
            top: -0em;
            margin-right: -0.61em;
            color: #ff0000;
            fill: #ff0000;
            animation: bounceFloat 2s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8)) drop-shadow(0 8px 16px rgba(0, 0, 0, 0.6)) drop-shadow(2px 2px 0px rgba(255, 0, 0, 0.5));
        }

        @media (min-width: 640px) {
            .hero-title {
                font-size: 2.5rem;
                letter-spacing: 0.08em;
            }
        }

        @media (min-width: 768px) {
            .hero-title {
                font-size: 3.25rem;
                letter-spacing: 0.1em;
            }
        }

        @media (min-width: 1024px) {
            .hero-title {
                font-size: 4rem;
                letter-spacing: 0.12em;
            }
        }

        @media (min-width: 1280px) {
            .hero-title {
                font-size: 5rem;
                letter-spacing: 0.15em;
            }
        }

        /* Flicker Button Styles */
        @keyframes flicker {
            0% {
                transform: scale(1);
            }

            25% {
                transform: scale(0);
            }

            26% {
                transform: scale(0) translateX(100%);
            }

            50% {
                transform: scale(1) translateX(100%);
            }

            75% {
                transform: scale(0) translateX(100%);
            }

            76% {
                transform: scale(0);
            }

            100% {
                transform: scale(1);
            }
        }

        .flicker-btn {
            --transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            overflow: hidden;
            min-width: 200px;
            min-height: 50px;
            padding: 15px 50px 15px 30px;
            background:
                repeating-linear-gradient(0deg,
                    rgba(139, 111, 71, 0.1) 0px,
                    rgba(139, 111, 71, 0.1) 1px,
                    transparent 1px,
                    transparent 2px),
                repeating-linear-gradient(90deg,
                    rgba(139, 111, 71, 0.1) 0px,
                    rgba(139, 111, 71, 0.1) 1px,
                    transparent 1px,
                    transparent 2px),
                radial-gradient(circle at 20% 30%, rgba(160, 130, 109, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 111, 71, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #8B6F47 0%, #A0826D 50%, #7A5F3F 100%);
            border-radius: 99px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-size: 18px;
            color: white;
            text-decoration: none;
            transition: background 0.3s, color 0.3s;
            white-space: nowrap;
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.2),
                inset 0 -1px 2px rgba(255, 255, 255, 0.1),
                0 2px 4px rgba(0, 0, 0, 0.3);
        }

        @media (min-width: 640px) {
            .flicker-btn {
                min-width: 220px;
                padding: 18px 60px 18px 35px;
                font-size: 20px;
            }

            .flicker-btn__filler {
                right: 40px;
                width: 14px;
                height: 14px;
            }
        }

        @media (min-width: 768px) {
            .flicker-btn {
                min-width: 250px;
                padding: 20px 70px 20px 40px;
                font-size: 22px;
            }

            .flicker-btn__filler {
                right: 45px;
                width: 15px;
                height: 15px;
            }
        }

        .flicker-btn:focus {
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.2),
                inset 0 -1px 2px rgba(255, 255, 255, 0.1),
                0 2px 4px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(139, 111, 71, 0.5);
            outline: none;
        }

        .flicker-btn__text {
            position: relative;
            z-index: 4;
            transition: color 0.3s;
            display: inline-block;
            color: inherit;
        }

        .flicker-btn__icon {
            flex-shrink: 0;
            aspect-ratio: 1;
            width: 50px;
            height: 50px;
            border-radius: 100%;
            background: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 12H19M19 12L12 5M19 12L12 19' stroke='%238B6F47' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center center no-repeat;
            background-color: rgba(255, 255, 255, 0.2);
            background-size: 24px 24px;
            position: absolute;
            right: 8px;
            top: 50%;
            z-index: 3;
            transform: translateY(-50%) scale(0);
            overflow: hidden;
            transition: transform var(--transition);
        }

        .flicker-btn__filler {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 100%;
            position: absolute;
            right: 35px;
            top: 50%;
            z-index: 1;
            transform: translateY(-50%);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.3);
            pointer-events: none;
            opacity: 1;
            will-change: transform;
        }

        @media (hover: hover) and (pointer: fine) {
            .flicker-btn:hover {
                background:
                    repeating-linear-gradient(0deg,
                        rgba(139, 111, 71, 0.1) 0px,
                        rgba(139, 111, 71, 0.1) 1px,
                        transparent 1px,
                        transparent 2px),
                    repeating-linear-gradient(90deg,
                        rgba(139, 111, 71, 0.1) 0px,
                        rgba(139, 111, 71, 0.1) 1px,
                        transparent 1px,
                        transparent 2px),
                    radial-gradient(circle at 20% 30%, rgba(160, 130, 109, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(139, 111, 71, 0.2) 0%, transparent 50%),
                    linear-gradient(135deg, #9B7F57 0%, #B0927D 50%, #8A6F4F 100%);
                color: #5A4630;
            }

            .flicker-btn:hover .flicker-btn__text {
                color: #5A4630;
            }

            .flicker-btn:hover .flicker-btn__icon {
                transform: translateY(-50%) scale(1);
                background-color: rgba(139, 111, 71, 0.2);
                background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 12H19M19 12L12 5M19 12L12 19' stroke='%235A4630' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            }

            .flicker-btn:hover .flicker-btn__filler {
                transform: translateY(-50%) scale(150);
                animation: none;
                z-index: 1;
            }
        }

        @media (hover: none) {
            .flicker-btn:active {
                background:
                    repeating-linear-gradient(0deg,
                        rgba(139, 111, 71, 0.1) 0px,
                        rgba(139, 111, 71, 0.1) 1px,
                        transparent 1px,
                        transparent 2px),
                    repeating-linear-gradient(90deg,
                        rgba(139, 111, 71, 0.1) 0px,
                        rgba(139, 111, 71, 0.1) 1px,
                        transparent 1px,
                        transparent 2px),
                    radial-gradient(circle at 20% 30%, rgba(160, 130, 109, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(139, 111, 71, 0.2) 0%, transparent 50%),
                    linear-gradient(135deg, #9B7F57 0%, #B0927D 50%, #8A6F4F 100%);
                color: #5A4630;
            }

            .flicker-btn:active .flicker-btn__text {
                color: #5A4630;
            }

            .flicker-btn:active .flicker-btn__icon {
                transform: translateY(-50%) scale(1);
                background-color: rgba(139, 111, 71, 0.2);
                background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 12H19M19 12L12 5M19 12L12 19' stroke='%235A4630' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            }

            .flicker-btn:active .flicker-btn__filler {
                transform: translateY(-50%) scale(150);
                animation: none;
                z-index: 1;
            }
        }

        /* Navigation Contact Us Button Fix */
        header .btn-primary,
        nav .btn-primary,
        .btn-primary {
            background: linear-gradient(135deg, #0050ff 0%, #0040d9 100%);
            background-color: #0050ff;
            color: #ffffff !important;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 80, 255, 0.3);
        }

        header .btn-primary:hover,
        nav .btn-primary:hover,
        .btn-primary:hover {
            background: linear-gradient(135deg, #0040d9 0%, #0033b3 100%);
            background-color: #0040d9;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 80, 255, 0.4);
        }

        header .btn-primary:active,
        nav .btn-primary:active,
        .btn-primary:active {
            transform: translateY(0);
        }

        /* Map Container Responsive Styles - Modern Whiteboard */
        #container {
            min-height: 460px;
            overflow: hidden;
            touch-action: pan-x pan-y;
            -webkit-overflow-scrolling: touch;
            background:
                /* Subtle grid pattern */
                repeating-linear-gradient(0deg,
                    rgba(0, 0, 0, 0.02) 0px,
                    rgba(0, 0, 0, 0.02) 1px,
                    transparent 1px,
                    transparent 20px),
                repeating-linear-gradient(90deg,
                    rgba(0, 0, 0, 0.02) 0px,
                    rgba(0, 0, 0, 0.02) 1px,
                    transparent 1px,
                    transparent 20px),
                /* Whiteboard texture */
                radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.01) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 0, 0, 0.01) 0%, transparent 50%),
                /* Base whiteboard color */
                linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f5f6f7 100%);
            border: 8px solid #2c3e50;
            border-radius: 16px;
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
        }

        #container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                /* Subtle noise texture */
                url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none;
            border-radius: 8px;
            z-index: 0;
        }

        /* Ensure chart content appears above whiteboard texture */
        #container>svg,
        #container>div {
            position: relative;
            z-index: 1;
        }

        @media (max-width: 640px) {
            #container {
                height: 350px !important;
                min-height: 350px !important;
                padding: 8px !important;
                max-width: 100% !important;
            }

            /* Improve readability on small screens */
            .highcharts-data-label text {
                font-size: 9px !important;
            }
        }

        @media (min-width: 641px) and (max-width: 768px) {
            #container {
                height: 400px !important;
                min-height: 400px !important;
                padding: 12px !important;
                max-width: 100% !important;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            #container {
                height: 450px !important;
                min-height: 450px !important;
                max-width: 90% !important;
            }
        }

        /* Ensure map is scrollable on mobile if needed */
        @media (max-width: 768px) {
            .map-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                touch-action: pan-x pan-y;
            }
        }

        /* Chart Legend Styles */
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem 0.75rem;
            margin: 1rem auto 0 auto;
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            max-width: 680px;
        }

        @media (max-width: 640px) {
            .chart-legend {
                gap: 0.375rem 0.5rem;
                padding: 0.5rem;
                margin: 0.75rem auto 0 auto;
            }
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            color: white;
            font-size: 0.7rem;
            font-weight: 500;
        }

        @media (max-width: 640px) {
            .legend-item {
                font-size: 0.65rem;
                gap: 0.3rem;
            }
        }

        .legend-marker {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            flex-shrink: 0;
        }

        @media (max-width: 640px) {
            .legend-marker {
                width: 10px;
                height: 10px;
            }
        }

        .legend-marker.clickable {
            position: relative;
            animation: pulse 2s ease-in-out infinite;
        }

        .legend-marker.clickable::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 8px;
            font-weight: bold;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        /* Chart Instructions */
        .chart-instructions {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 0.9rem;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 640px) {
            .chart-instructions {
                padding: 0.75rem 1rem;
                font-size: 0.8rem;
                margin-bottom: 1rem;
            }
        }

        .chart-instructions p {
            margin: 0.5rem 0;
        }

        @media (max-width: 640px) {
            .chart-instructions p {
                margin: 0.375rem 0;
            }
        }

        .chart-instructions strong {
            font-weight: 600;
            color: #ffd700;
        }

        /* Improved marker hover states */
        .highcharts-markers path {
            transition: transform 0.2s ease, filter 0.2s ease;
        }

        .highcharts-markers path:hover {
            transform: scale(1.15);
            filter: brightness(1.2) drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
        }

        /* State counter badge */
        .state-counter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 80, 255, 0.9);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 0.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Modal Styles */
        .city-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease;
        }

        .city-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .city-modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            margin: auto;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: slideUp 0.3s ease;
            font-family: 'Inter', sans-serif;
            border: 3px solid #0050ff;
        }

        .city-modal-content::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, #0050ff, #ffd700, #0050ff);
            border-radius: 16px;
            z-index: -1;
            opacity: 0.3;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 0.6;
            }
        }

        @media (min-width: 640px) {
            .city-modal-content {
                padding: 2.5rem;
            }
        }

        .city-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }

        .city-modal-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
        }

        @media (min-width: 640px) {
            .city-modal-title {
                font-size: 1.75rem;
            }
        }

        .city-modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            font-weight: 300;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .city-modal-close:hover {
            background-color: #f3f4f6;
            color: #1a202c;
        }

        .city-modal-close:active {
            transform: scale(0.95);
        }

        .city-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .city-item {
            margin-bottom: 0.75rem;
        }

        .city-item:last-child {
            margin-bottom: 0;
        }

        .city-link {
            display: block;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #0050ff 0%, #0040d9 100%);
            color: #ffffff;
            text-decoration: none;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 80, 255, 0.3);
            text-align: center;
        }

        .city-link:hover {
            background: linear-gradient(135deg, #0040d9 0%, #0033b3 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 80, 255, 0.4);
        }

        .city-link::before {
            content: 'üìç ';
            margin-right: 0.5rem;
        }

        /* Search/Filter Feature */
        .city-search {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .city-search:focus {
            outline: none;
            border-color: #0050ff;
            box-shadow: 0 0 0 3px rgba(0, 80, 255, 0.1);
        }

        .no-results {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
            font-style: italic;
        }

        /* Chart Search Box Styles */
        .chart-search-container {
            max-width: 680px;
            width: 100%;
            margin: 0 auto 1.5rem auto;
            position: relative;
        }

        .chart-search-box {
            width: 100%;
            padding: 1rem 1.5rem 1rem 3rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
            outline: none;
        }

        .chart-search-box::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .chart-search-box:focus {
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.2);
        }

        .chart-search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
            pointer-events: none;
        }

        .chart-search-clear {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .chart-search-clear:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .chart-search-clear.show {
            display: flex;
        }

        .chart-search-results {
            text-align: center;
            margin-top: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            font-weight: 500;
            min-height: 1.5rem;
        }

        .chart-search-results.hidden {
            display: none;
        }

        .chart-search-results.highlight {
            color: #ffd700;
            font-weight: 600;
        }

        @media (max-width: 640px) {
            .chart-search-box {
                padding: 0.875rem 1.25rem 0.875rem 2.75rem;
                font-size: 0.9rem;
            }

            .chart-search-icon {
                left: 1rem;
                font-size: 1.1rem;
            }
        }

        .city-link:active {
            transform: translateY(0);
        }
    </style>
</head>

<body>
    <div id="nav-placeholder"></div>

    <!-- Hero Section -->
    <section
        class="relative h-[50vh] sm:h-[60vh] md:h-[70vh] lg:h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 bg-cover bg-center"
            style="background-image: url('../assets/images/about/locations/hero.jpg');"></div>
        <div class="absolute inset-0 hero-gradient"></div>
        <div
            class="relative z-10 text-center text-white px-4 sm:px-6 max-w-4xl mx-auto -mt-8 sm:-mt-12 md:-mt-16 lg:-mt-20">
            <h1 class="hero-title">
                <svg class="location-icon-o" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                </svg>
                UR PHOTO BOOTH LOCATIONS
            </h1>
            <p class="text-base sm:text-lg md:text-xl lg:text-2xl mb-6 sm:mb-8">Discover MiHi Entertainment's many
                locations across the US, bringing our cutting-edge event technology and services to a city near you.</p>
            <div class="mt-6 sm:mt-8">
                <a href="../index.html#contact" class="flicker-btn">
                    <span class="flicker-btn__text">Contact Us</span>
                    <span class="flicker-btn__icon"></span>
                    <span class="flicker-btn__filler"></span>
                </a>
            </div>
        </div>
    </section>

    <!-- Locations Section -->
    <section class="section-padding relative"
        style="background-image: url('https://images.unsplash.com/photo-1524661135-423995f22d0b?w=1600'); background-size: cover; background-position: center; background-repeat: no-repeat;">
        <div class="absolute inset-0 hero-gradient"></div>
        <div class="container mx-auto px-4 sm:px-6 relative z-10">
            <div class="max-w-6xl mx-auto text-center">
                <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 sm:mb-8 tracking-wide"
                    style="font-family: 'Montserrat', sans-serif; font-weight: 900; letter-spacing: 0.05em; text-transform: uppercase;">
                    FIND US IN A CITY NEAR YOU!
                </h2>
                <p class="text-base sm:text-lg md:text-xl text-white/90 max-w-8xl mx-auto leading-relaxed mb-8 sm:mb-12"
                    style="font-family: 'Inter', sans-serif;">
                    Use the interactive map below to find the closest city to you! As a national Photo Booth company, we
                    strive to deliver our outstanding services across the country.
                </p>

                <!-- Chart Instructions -->
                <div class="chart-instructions">
                    <p><strong>üí° Tip:</strong> Click on any <strong>highlighted state</strong> (with gold border) to
                        see available cities we serve!</p>
                    <p>Hover over any state to learn more. <span id="availableStatesCount"
                            class="state-counter">0</span> states have locations available.</p>
                </div>

                <!-- Chart Search Box -->
                <div class="chart-search-container">
                    <span class="chart-search-icon">üîç</span>
                    <input type="text" id="chartSearchBox" class="chart-search-box"
                        placeholder="üîç Search for a city or state (e.g., 'New York', 'CA', 'Orlando')..."
                        autocomplete="off" onkeyup="handleChartSearchKeyup(event)" oninput="filterChartStates()">
                    <button class="chart-search-clear" id="chartSearchClear" onclick="clearChartSearch()"
                        aria-label="Clear search">√ó</button>
                    <div id="chartSearchResults" class="chart-search-results hidden"></div>
                </div>

                <!-- Interactive US Map -->
                <div class="map-wrapper mt-4 sm:mt-6 flex justify-center px-2 sm:px-4 overflow-hidden w-full">
                    <div id="container"
                        style="height: 460px; width: 100%; max-width: 680px; padding: 20px; position: relative; z-index: 1;">
                    </div>
                </div>

                <!-- Chart Legend -->
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-marker" style="background: #ffab00;"></div>
                        <span>South Region</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-marker" style="background: #2962ff;"></div>
                        <span>West Region</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-marker" style="background: #00c853;"></div>
                        <span>Midwest Region</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-marker" style="background: #c51162;"></div>
                        <span>Northeast Region</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-marker clickable" style="background: #000000;"></div>
                        <span>States with Available Cities</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- City Modal -->
    <div id="cityModal" class="city-modal">
        <div class="city-modal-content">
            <div class="city-modal-header">
                <h3 class="city-modal-title" id="modalTitle">Areas we serve</h3>
                <button class="city-modal-close" onclick="closeCityModal()" aria-label="Close modal">&times;</button>
            </div>
            <input type="text" id="citySearch" class="city-search" placeholder="üîç Search cities..." autocomplete="off"
                onkeyup="filterCities()">
            <ul class="city-list" id="cityList">
                <!-- Cities will be dynamically inserted here -->
            </ul>
            <div id="noResults" class="no-results" style="display: none;">
                No cities found matching your search.
            </div>
        </div>
    </div>

    <script>
        // List of states that should display labels
        const statesWithLabels = ['AZ', 'CA', 'CO', 'CT', 'DC', 'FL', 'GA', 'IL', 'KY', 'LA', 'MA', 'MI', 'MN', 'NV', 'NY', 'NC', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'TN', 'TX', 'WA'];

        // Count states with available cities
        function countAvailableStates() {
            let count = 0;
            chart.series.forEach(series => {
                series.data.forEach(point => {
                    if (point.cities && point.cities.length > 0) {
                        count++;
                    }
                });
            });
            const counterElement = document.getElementById('availableStatesCount');
            if (counterElement) {
                counterElement.textContent = count;
            }
        }

        // Store original colors and states for search filtering
        let originalStateData = [];
        const stateNameMap = {
            'AZ': 'Arizona', 'CA': 'California', 'CO': 'Colorado', 'CT': 'Connecticut',
            'DC': 'District of Columbia', 'FL': 'Florida', 'GA': 'Georgia', 'IL': 'Illinois',
            'KY': 'Kentucky', 'LA': 'Louisiana', 'MA': 'Massachusetts', 'MI': 'Michigan',
            'MN': 'Minnesota', 'NV': 'Nevada', 'NY': 'New York', 'NC': 'North Carolina',
            'OH': 'Ohio', 'OK': 'Oklahoma', 'OR': 'Oregon', 'PA': 'Pennsylvania',
            'RI': 'Rhode Island', 'SC': 'South Carolina', 'TN': 'Tennessee', 'TX': 'Texas',
            'WA': 'Washington', 'HI': 'Hawaii', 'NM': 'New Mexico', 'MS': 'Mississippi',
            'AL': 'Alabama', 'UT': 'Utah', 'KS': 'Kansas', 'AR': 'Arkansas', 'VA': 'Virginia',
            'NE': 'Nebraska', 'MO': 'Missouri', 'WV': 'West Virginia', 'MD': 'Maryland',
            'DE': 'Delaware', 'ID': 'Idaho', 'WY': 'Wyoming', 'SD': 'South Dakota',
            'IA': 'Iowa', 'IN': 'Indiana', 'NJ': 'New Jersey', 'MT': 'Montana',
            'ND': 'North Dakota', 'WI': 'Wisconsin', 'VT': 'Vermont', 'NH': 'New Hampshire',
            'AK': 'Alaska', 'ME': 'Maine'
        };

        // Filter chart states based on search
        function filterChartStates() {
            const searchBox = document.getElementById('chartSearchBox');
            const clearButton = document.getElementById('chartSearchClear');
            const resultsDiv = document.getElementById('chartSearchResults');
            const searchTerm = searchBox ? searchBox.value.toLowerCase().trim() : '';

            // Show/hide clear button
            if (clearButton) {
                if (searchTerm.length > 0) {
                    clearButton.classList.add('show');
                } else {
                    clearButton.classList.remove('show');
                }
            }

            if (!chart || !chart.series) return;

            // Get all chart series and update points
            let matchCount = 0;
            let matchedStates = [];

            chart.series.forEach((series, seriesIndex) => {
                series.data.forEach((point, pointIndex) => {
                    if (!point.USstate) return;

                    let matches = false;
                    const stateAbbr = point.USstate;
                    const stateName = stateNameMap[stateAbbr] || stateAbbr;
                    const stateNameLower = stateName.toLowerCase();
                    const stateAbbrLower = stateAbbr.toLowerCase();

                    // Check if search matches state name or abbreviation
                    if (searchTerm === '' || stateNameLower.includes(searchTerm) || stateAbbrLower.includes(searchTerm)) {
                        matches = true;
                    }

                    // Check if search matches any city in the state
                    if (!matches && point.cities && point.cities.length > 0) {
                        point.cities.forEach(city => {
                            if (city.toLowerCase().includes(searchTerm)) {
                                matches = true;
                            }
                        });
                    }

                    if (matches && searchTerm !== '') {
                        matchCount++;
                        matchedStates.push(stateAbbr);
                    }

                    // Prepare update options
                    const updateOptions = {
                        marker: {},
                        dataLabels: {
                            enabled: true,
                            style: {}
                        }
                    };

                    if (searchTerm === '') {
                        // Reset to original appearance
                        updateOptions.marker = {
                            fillColor: point.color,
                            lineColor: point.cities && point.cities.length > 0 ? '#ffd700' : 'transparent',
                            lineWidth: point.cities && point.cities.length > 0 ? 3 : 0,
                            radius: point.cities && point.cities.length > 0 ? 16 : 14,
                            opacity: 1
                        };
                        updateOptions.dataLabels.style = {
                            opacity: 1,
                            fontWeight: 'bold',
                            fontSize: '12px',
                            color: '#000000'
                        };
                    } else if (matches) {
                        // Highlight matching state - make it bright and prominent
                        updateOptions.marker = {
                            fillColor: point.color,
                            lineColor: '#ffd700',
                            lineWidth: 5,
                            radius: 22,
                            opacity: 1
                        };
                        updateOptions.dataLabels.style = {
                            opacity: 1,
                            fontWeight: 'bold',
                            fontSize: '15px',
                            color: '#1a202c',
                            textOutline: '2px contrast'
                        };
                    } else {
                        // Grey out non-matching states
                        updateOptions.marker = {
                            fillColor: '#cccccc',
                            lineColor: 'transparent',
                            lineWidth: 0,
                            radius: 8,
                            opacity: 0.25
                        };
                        updateOptions.dataLabels.style = {
                            opacity: 0.15,
                            fontWeight: 'normal',
                            fontSize: '10px',
                            color: '#999999'
                        };
                    }

                    // Apply update using point.update()
                    point.update(updateOptions, false);
                });
            });

            // Redraw chart after all updates
            chart.redraw();

            // Update results message
            if (resultsDiv) {
                if (searchTerm === '') {
                    resultsDiv.classList.add('hidden');
                    resultsDiv.textContent = '';
                } else if (matchCount > 0) {
                    resultsDiv.classList.remove('hidden');
                    resultsDiv.classList.add('highlight');
                    resultsDiv.textContent = `‚úì Found ${matchCount} matching location${matchCount > 1 ? 's' : ''}: ${matchedStates.join(', ')}`;
                } else {
                    resultsDiv.classList.remove('hidden');
                    resultsDiv.classList.remove('highlight');
                    resultsDiv.textContent = `No matches found for "${searchBox.value}"`;
                }
            }
        }

        // Handle keyboard events for chart search
        function handleChartSearchKeyup(event) {
            filterChartStates();
            // Clear search on Escape key
            if (event.key === 'Escape') {
                clearChartSearch();
            }
        }

        // Clear chart search
        function clearChartSearch() {
            const searchBox = document.getElementById('chartSearchBox');
            if (searchBox) {
                searchBox.value = '';
                filterChartStates();
                searchBox.focus();
            }
        }

        const chart = Highcharts.chart('container', {
            chart: {
                type: 'bubble',
                margin: [70, 70, 70, 70],
                backgroundColor: 'transparent',
                reflow: true,
                events: {
                    click: function (e) {
                        // Find the clicked point
                        const point = e.target.point || e.target.series?.points?.find(p =>
                            e.chartX >= p.plotX + chart.plotLeft - 20 &&
                            e.chartX <= p.plotX + chart.plotLeft + 20 &&
                            e.chartY >= p.plotY + chart.plotTop - 20 &&
                            e.chartY <= p.plotY + chart.plotTop + 20
                        );

                        if (point && point.cities) {
                            openCityModal(point.USstate, point.cities);
                        }
                    }
                }
            },
            title: {
                text: ''
            },
            subtitle: {
                text: ''
            },
            credits: {
                enabled: false
            },
            plotOptions: {
                series: {
                    marker: {
                        lineColor: function () {
                            // Highlight clickable states with a gold border
                            return this.cities ? '#ffd700' : 'transparent';
                        },
                        lineWidth: function () {
                            return this.cities ? 3 : 0;
                        },
                        symbol: 'hexagon',
                        radius: function () {
                            // Make clickable states slightly larger
                            return this.cities ? 16 : 14;
                        },
                        states: {
                            hover: {
                                lineWidth: 4,
                                radius: 18,
                                fillColor: function () {
                                    // Brighten on hover
                                    return Highcharts.color(this.color).brighten(0.2).get();
                                },
                                lineColor: '#ffd700'
                            }
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        formatter: function () {
                            // Only show label if state is in the approved list
                            if (this.point.USstate && statesWithLabels.includes(this.point.USstate)) {
                                let label = this.point.USstate;
                                // Add indicator for states with cities
                                if (this.point.cities && this.point.cities.length > 0) {
                                    label += ' ‚úì';
                                }
                                return label;
                            }
                            return '';
                        },
                        color: '#000000',
                        style: {
                            textOutline: '2px contrast',
                            fontWeight: 'bold',
                            fontSize: '12px',
                            cursor: 'pointer'
                        }
                    },
                    cursor: 'pointer',
                    point: {
                        events: {
                            click: function () {
                                if (this.cities && this.cities.length > 0) {
                                    openCityModal(this.USstate, this.cities);
                                } else {
                                    // Show a friendly message for states without cities
                                    alert(`We don't have locations in ${this.USstate} yet, but we're always expanding! Contact us to request service in your area.`);
                                }
                            },
                            mouseOver: function () {
                                // Enhance hover feedback
                                if (this.cities && this.cities.length > 0) {
                                    this.series.chart.tooltip.update({
                                        style: {
                                            fontSize: '14px',
                                            fontWeight: '600'
                                        }
                                    });
                                }
                            }
                        }
                    },
                    states: {
                        hover: {
                            brightness: 0.1,
                            enabled: true
                        },
                        inactive: {
                            opacity: 0.6
                        }
                    }
                }
            },
            tooltip: {
                useHTML: true,
                headerFormat: null,
                pointFormatter: function () {
                    if (this.USstate) {
                        const stateNames = {
                            'AZ': 'Arizona', 'CA': 'California', 'CO': 'Colorado', 'CT': 'Connecticut',
                            'DC': 'District of Columbia', 'FL': 'Florida', 'GA': 'Georgia', 'IL': 'Illinois',
                            'KY': 'Kentucky', 'LA': 'Louisiana', 'MA': 'Massachusetts', 'MI': 'Michigan',
                            'MN': 'Minnesota', 'NV': 'Nevada', 'NY': 'New York', 'NC': 'North Carolina',
                            'OH': 'Ohio', 'OK': 'Oklahoma', 'OR': 'Oregon', 'PA': 'Pennsylvania',
                            'RI': 'Rhode Island', 'SC': 'South Carolina', 'TN': 'Tennessee', 'TX': 'Texas',
                            'WA': 'Washington'
                        };
                        const stateName = stateNames[this.USstate] || this.USstate;
                        const regionColors = {
                            'south': '#ffab00',
                            'west': '#2962ff',
                            'midwest': '#00c853',
                            'northeast': '#c51162'
                        };
                        const regionColor = regionColors[this.region] || '#666';

                        let html = `<div style="padding: 4px 0;">
                            <div style="font-size: 16px; font-weight: bold; color: #1a202c; margin-bottom: 8px;">
                                ${stateName} (${this.USstate})
                            </div>
                            <div style="font-size: 13px; color: #4a5568; margin-bottom: 4px;">
                                üìç Capital: <b>${this.capital}</b>
                            </div>
                            <div style="font-size: 13px; color: #4a5568; margin-bottom: 4px;">
                                üåé Region: <b style="color: ${regionColor};">${this.region.charAt(0).toUpperCase() + this.region.slice(1)}</b>
                            </div>`;

                        if (this.cities && this.cities.length > 0) {
                            html += `<div style="margin-top: 8px; padding-top: 8px; border-top: 2px solid #e5e7eb;">
                                <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">
                                    <strong style="color: #059669;">‚úì We serve ${this.cities.length} location${this.cities.length > 1 ? 's' : ''}:</strong>
                                </div>
                                <div style="font-size: 13px; color: #1a202c;">
                                    ${this.cities.join(', ')}
                                </div>
                                <div style="margin-top: 8px; font-size: 11px; color: #ffd700; font-weight: 600;">
                                    üëÜ Click to see details
                                </div>
                            </div>`;
                        } else {
                            html += `<div style="margin-top: 8px; padding-top: 8px; border-top: 2px solid #e5e7eb;">
                                <div style="font-size: 12px; color: #9ca3af;">
                                    No locations available yet
                                </div>
                            </div>`;
                        }

                        html += `</div>`;
                        return html;
                    }
                    return '';
                },
                backgroundColor: 'rgba(255, 255, 255, 0.98)',
                borderColor: '#0050ff',
                borderRadius: 12,
                borderWidth: 2,
                shadow: {
                    color: 'rgba(0, 0, 0, 0.2)',
                    offsetX: 0,
                    offsetY: 2,
                    opacity: 0.3,
                    width: 4
                },
                style: {
                    fontSize: '13px',
                    fontFamily: "'Inter', sans-serif"
                },
                animation: true,
                hideDelay: 100,
                followPointer: false,
                padding: 12
            },
            xAxis: {
                lineWidth: 0,
                minorGridLineWidth: 0,
                lineColor: 'transparent',
                labels: {
                    enabled: false
                },
                minorTickLength: 0,
                tickLength: 0
            },
            yAxis: {
                gridLineWidth: 0,
                tickPositions: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                lineWidth: 0,
                minorGridLineWidth: 0,
                lineColor: 'transparent',
                labels: {
                    enabled: false
                },
                title: {
                    text: null
                },
                minorTickLength: 0,
                tickLength: 0
            },
            legend: {
                enabled: false
            },
            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 640
                    },
                    chartOptions: {
                        chart: {
                            margin: [40, 20, 40, 20]
                        },
                        plotOptions: {
                            series: {
                                dataLabels: {
                                    style: {
                                        fontSize: '9px',
                                        fontWeight: 'bold'
                                    }
                                },
                                marker: {
                                    radius: 8
                                }
                            }
                        },
                        tooltip: {
                            style: {
                                fontSize: '11px'
                            }
                        }
                    }
                }, {
                    condition: {
                        minWidth: 641,
                        maxWidth: 768
                    },
                    chartOptions: {
                        chart: {
                            margin: [50, 40, 50, 40]
                        },
                        plotOptions: {
                            series: {
                                dataLabels: {
                                    style: {
                                        fontSize: '10px',
                                        fontWeight: 'bold'
                                    }
                                },
                                marker: {
                                    radius: 10
                                }
                            }
                        },
                        tooltip: {
                            style: {
                                fontSize: '12px'
                            }
                        }
                    }
                }, {
                    condition: {
                        minWidth: 769,
                        maxWidth: 1024
                    },
                    chartOptions: {
                        chart: {
                            margin: [60, 50, 60, 50]
                        },
                        plotOptions: {
                            series: {
                                dataLabels: {
                                    style: {
                                        fontSize: '11px',
                                        fontWeight: 'bold'
                                    }
                                },
                                marker: {
                                    radius: 12
                                }
                            }
                        }
                    }
                }]
            },
            series: [{
                data: [{
                    y: 1,
                    USstate: "HI",
                    capital: "Honolulu",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 16,
                    y: 1,
                    USstate: "FL",
                    capital: "Tallahassee",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Orlando"]
                }]
            }, {
                data: [{
                    x: 7,
                    y: 2,
                    USstate: "TX",
                    capital: "Austin",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Dallas", "Houston", "San Antonio"]
                }, {
                    x: 15,
                    y: 2,
                    USstate: "GA",
                    capital: "Atlanta",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Savannah"]
                }]
            }, {
                data: [{
                    x: 6,
                    y: 3,
                    USstate: "NM",
                    capital: "Santa Fe",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 8,
                    y: 3,
                    USstate: "OK",
                    capital: "Oklahoma City",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Oklahoma City", "Tulsa"]
                }, {
                    x: 10,
                    y: 3,
                    USstate: "LA",
                    capital: "Baton Rouge",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Baton Rouge", "New Orleans"]
                }, {
                    x: 12,
                    y: 3,
                    USstate: "MS",
                    capital: "Jackson",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 14,
                    y: 3,
                    USstate: "AL",
                    capital: "Montgomery",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 16,
                    y: 3,
                    USstate: "SC",
                    capital: "Columbia",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Charleston"]
                }]
            }, {
                data: [{
                    x: 3,
                    y: 4,
                    USstate: "CA",
                    capital: "Sacramento",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Los Angeles", "San Diego", "San Francisco"]
                }, {
                    x: 5,
                    y: 4,
                    USstate: "AZ",
                    capital: "Phoenix",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Phoenix", "Tucson"]
                }, {
                    x: 7,
                    y: 4,
                    USstate: "UT",
                    capital: "Salt Lake City",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 9,
                    y: 4,
                    USstate: "KS",
                    capital: "Topeka",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 11,
                    y: 4,
                    USstate: "AR",
                    capital: "Little Rock",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 13,
                    y: 4,
                    USstate: "TN",
                    capital: "Nashville",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Nashville"]
                }, {
                    x: 15,
                    y: 4,
                    USstate: "VA",
                    capital: "Richmond",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 17,
                    y: 4,
                    USstate: "NC",
                    capital: "Raleigh",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Charlotte"]
                }]
            }, {
                data: [{
                    x: 2,
                    y: 5,
                    USstate: "OR",
                    capital: "Salem",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Portland"]
                }, {
                    x: 4,
                    y: 5,
                    USstate: "NV",
                    capital: "Carson City",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Las Vegas"]
                }, {
                    x: 6,
                    y: 5,
                    USstate: "CO",
                    capital: "Denver",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Aspen", "Colorado Springs", "Denver", "Estes Park", "Lafayette", "Lakewood", "Vail"]
                }, {
                    x: 8,
                    y: 5,
                    USstate: "NE",
                    capital: "Lincoln",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 10,
                    y: 5,
                    USstate: "MO",
                    capital: "Jefferson City",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 12,
                    y: 5,
                    USstate: "KY",
                    capital: "Frankfort",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Lexington"]
                }, {
                    x: 14,
                    y: 5,
                    USstate: "WV",
                    capital: "Charleston",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 16,
                    y: 5,
                    USstate: "MD",
                    capital: "Annapolis",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 18,
                    y: 5,
                    USstate: "DE",
                    capital: "Dover",
                    color: "#ffab00",
                    region: "south"
                }, {
                    x: 20,
                    y: 5,
                    USstate: "DC",
                    capital: "Washington",
                    color: "#ffab00",
                    region: "south",
                    cities: ["Washington D.C."]
                }]
            }, {
                data: [{
                    x: 3,
                    y: 6,
                    USstate: "ID",
                    capital: "Boise",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 5,
                    y: 6,
                    USstate: "WY",
                    capital: "Cheyenne",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 7,
                    y: 6,
                    USstate: "SD",
                    capital: "Pierre",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 9,
                    y: 6,
                    USstate: "IA",
                    capital: "Des Moines",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 11,
                    y: 6,
                    USstate: "IL",
                    capital: "Springfield",
                    color: "#00c853",
                    region: "midwest",
                    cities: ["Chicago"]
                }, {
                    x: 13,
                    y: 6,
                    USstate: "IN",
                    capital: "Indianapolis",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 15,
                    y: 6,
                    USstate: "OH",
                    capital: "Columbus",
                    color: "#00c853",
                    region: "midwest",
                    cities: ["Cleveland"]
                }, {
                    x: 17,
                    y: 6,
                    USstate: "PA",
                    capital: "Harrisburg",
                    color: "#c51162",
                    region: "northeast",
                    cities: ["Pittsburgh"]
                }, {
                    x: 19,
                    y: 6,
                    USstate: "NJ",
                    capital: "Trenton",
                    color: "#c51162",
                    region: "northeast"
                }, {
                    x: 21,
                    y: 6,
                    USstate: "CT",
                    capital: "Hartford",
                    color: "#c51162",
                    region: "northeast",
                    cities: ["Hartford"]
                }]
            }, {
                data: [{
                    x: 2,
                    y: 7,
                    USstate: "WA",
                    capital: "Olympia",
                    color: "#2962ff",
                    region: "west",
                    cities: ["Seattle"]
                }, {
                    x: 4,
                    y: 7,
                    USstate: "MT",
                    capital: "Helena",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 6,
                    y: 7,
                    USstate: "ND",
                    capital: "Bismarck",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 8,
                    y: 7,
                    USstate: "MN",
                    capital: "Saint Paul",
                    color: "#00c853",
                    region: "midwest",
                    cities: ["Minneapolis"]
                }, {
                    x: 10,
                    y: 7,
                    USstate: "WI",
                    capital: "Madison",
                    color: "#00c853",
                    region: "midwest"
                }, {
                    x: 14,
                    y: 7,
                    USstate: "MI",
                    capital: "Lansing",
                    color: "#00c853",
                    region: "midwest",
                    cities: ["Detroit"]
                }, {
                    x: 18,
                    y: 7,
                    USstate: "NY",
                    capital: "Albany",
                    color: "#c51162",
                    region: "northeast",
                    cities: ["Manhattan"]
                }, {
                    x: 20,
                    y: 7,
                    USstate: "MA",
                    capital: "Boston",
                    color: "#c51162",
                    region: "northeast",
                    cities: ["Boston", "Cape Cod"]
                }, {
                    x: 22,
                    y: 7,
                    USstate: "RI",
                    capital: "Providence",
                    color: "#c51162",
                    region: "northeast",
                    cities: ["Newport"]
                }]
            }, {
                data: [{
                    x: 19,
                    y: 8,
                    USstate: "VT",
                    capital: "Montpelier",
                    color: "#c51162",
                    region: "northeast"
                }, {
                    x: 21,
                    y: 8,
                    USstate: "NH",
                    capital: "Concord",
                    color: "#c51162",
                    region: "northeast"
                }]
            }, {
                data: [{
                    x: 0,
                    y: 9,
                    USstate: "AK",
                    capital: "Juneau",
                    color: "#2962ff",
                    region: "west"
                }, {
                    x: 22,
                    y: 9,
                    USstate: "ME",
                    capital: "Augusta",
                    color: "#c51162",
                    region: "northeast"
                }]
            }]
        });

        // Count available states after chart is created
        setTimeout(countAvailableStates, 500);

        // Handle window resize and orientation change for mobile responsiveness
        let resizeTimer;
        function handleResize() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                const chart = Highcharts.charts.find(chart => chart && chart.renderTo.id === 'container');
                if (chart) {
                    chart.reflow();
                }
            }, 250);
        }

        window.addEventListener('resize', handleResize);
        window.addEventListener('orientationchange', function () {
            setTimeout(handleResize, 500);
        });

        // Store original city list for filtering
        let originalCityList = [];

        // Modal Functions
        function openCityModal(state, cities) {
            const modal = document.getElementById('cityModal');
            const modalTitle = document.getElementById('modalTitle');
            const cityList = document.getElementById('cityList');
            const citySearch = document.getElementById('citySearch');
            const noResults = document.getElementById('noResults');

            if (modal && modalTitle && cityList) {
                // Set the modal title based on state
                const stateNames = {
                    'AZ': 'Arizona',
                    'CA': 'California',
                    'CO': 'Colorado',
                    'CT': 'Connecticut',
                    'DC': 'D.C.',
                    'FL': 'Florida',
                    'GA': 'Georgia',
                    'IL': 'Illinois',
                    'KY': 'Kentucky',
                    'LA': 'Louisiana',
                    'MA': 'Massachusetts',
                    'MI': 'Michigan',
                    'MN': 'Minnesota',
                    'NV': 'Nevada',
                    'NY': 'New York',
                    'NC': 'North Carolina',
                    'OH': 'Ohio',
                    'OK': 'Oklahoma',
                    'OR': 'Oregon',
                    'PA': 'Pennsylvania',
                    'RI': 'Rhode Island',
                    'SC': 'South Carolina',
                    'TN': 'Tennessee',
                    'TX': 'Texas',
                    'WA': 'Washington'
                };
                const stateName = stateNames[state] || state;
                modalTitle.textContent = `${cities.length} Location${cities.length > 1 ? 's' : ''} in ${stateName}`;

                // Clear search field
                if (citySearch) {
                    citySearch.value = '';
                }

                // Clear existing cities
                cityList.innerHTML = '';
                originalCityList = [];

                // City-specific page mappings
                const cityPageMap = {
                    'Phoenix': 'locations/photo-booth-rental-in-phoenix,arizona.html',
                    'Seattle': 'locations/photo-booth-rental-in-seattle,washington.html',
                    'Dallas': 'locations/photo-booth-rental-in-dallas,texas.html',
                    'Houston': 'locations/photo-booth-rental-in-houston,texas.html',
                    'San Antonio': 'locations/photo-booth-rental-in-san-antonio,texas.html',
                    'Nashville': 'locations/photo-booth-rental-in-nashville,tennessee.html',
                    'Charleston': 'locations/photo-booth-rental-in-charleston,south-carolina.html',
                    'Newport': 'locations/photo-booth-rental-in-newport,rhode-island.html'
                };

                // Function to properly encode file paths with special characters
                function getCityUrl(city) {
                    if (cityPageMap[city]) {
                        // For files with encoded characters in filename, return as-is
                        return cityPageMap[city];
                    }
                    return 'locations.html';
                }

                // Add cities to the list
                cities.forEach(city => {
                    const li = document.createElement('li');
                    li.className = 'city-item';
                    li.setAttribute('data-city', city.toLowerCase());
                    const link = document.createElement('a');
                    // Use city-specific page if available, otherwise use default
                    link.href = getCityUrl(city);
                    link.className = 'city-link';
                    link.textContent = city;
                    li.appendChild(link);
                    cityList.appendChild(li);
                    originalCityList.push(li.cloneNode(true));
                });

                // Hide no results message
                if (noResults) {
                    noResults.style.display = 'none';
                }

                modal.classList.add('show');
                document.body.style.overflow = 'hidden';

                // Focus on search input
                if (citySearch) {
                    setTimeout(() => citySearch.focus(), 100);
                }
            }
        }

        // Filter cities based on search input
        function filterCities() {
            const searchInput = document.getElementById('citySearch');
            const cityList = document.getElementById('cityList');
            const noResults = document.getElementById('noResults');

            if (!searchInput || !cityList) return;

            const searchTerm = searchInput.value.toLowerCase().trim();
            const cityItems = cityList.querySelectorAll('.city-item');
            let visibleCount = 0;

            cityItems.forEach(item => {
                const cityName = item.getAttribute('data-city') || '';
                if (cityName.includes(searchTerm)) {
                    item.style.display = '';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });

            // Show/hide no results message
            if (noResults) {
                if (visibleCount === 0 && searchTerm !== '') {
                    noResults.style.display = 'block';
                } else {
                    noResults.style.display = 'none';
                }
            }
        }

        function closeCityModal() {
            const modal = document.getElementById('cityModal');
            const citySearch = document.getElementById('citySearch');
            if (modal) {
                modal.classList.remove('show');
                document.body.style.overflow = '';
                // Clear search when closing
                if (citySearch) {
                    citySearch.value = '';
                    filterCities(); // Reset filter
                }
            }
        }

        // Close modal when clicking outside of it
        window.addEventListener('click', function (event) {
            const modal = document.getElementById('cityModal');
            if (event.target === modal) {
                closeCityModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closeCityModal();
            }
        });
    </script>

    <script src="../assets/components/navigation.js"></script>
    <script src="../assets/components/footer.js"></script>
</body>

</html>